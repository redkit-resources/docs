---
tags:
  - Гайд
  - Скрипты
  - Materials
  - .w2mi
  - .w2mesh

status: new

---
# Ассет конкретного уровня: проблема и исправление

blob:https://cdprojektred.atlassian.net/828b84c7-3f47-495a-8da8-d963579a34b8#media-blob-url=true&id=63449140-30e0-4381-9134-eaf9b2b4a24f&contextId=39256100&collection=contentId-39256100

**Некоторые ассеты привязаны к определённому уровню. Это означает, что ассет входит в состав пакета (bundle) этого уровня в финальной версии игры и загружается только при запуске именно этого уровня. Вот как можно исправить эту проблему.**

Некоторые сущности в существующем хранилище используют материалы, которые присутствуют только в определённых пакетах, и они не будут автоматически загружены в мод вместе с мешами, на которых используются. Из-за этого такие сущности будут невидимыми в других мирах игры.

Это происходит, когда вы загружаете (check out) сущность, содержащую несколько мешей, а файлы экземпляров материалов (.w2mi) не подтягиваются в мод вместе с файлами мешей (.w2mesh). Отсутствие мешей может привести к тому, что, например, здания будут иметь прозрачные стены и другие визуальные ошибки.

## Проблема

Вот пример того, как эта проблема влияет на игру.

В REDkit всё будет выглядеть нормально. Однако проблема станет заметна после того, как вы опубликуете свой мод и увидите это же место в игре.

![alt text](Error.JPG)

Создайте новый мир или используйте уже существующий. Добавьте **объект Kaerto house** на новый слой уровня. Вы можете найти его здесь:

- *environment\architecture\human\skellige\ard_skellig\kaer_trolde\buildings\old_set\entities\kaertro_house_big_old_exterior.w2ent*

![alt text](image-5.png)

- Теперь сохраните и опубликуйте мод-проект, а затем установите его в папку с установленной игрой.

Переместитесь в новый мир мода в релизной версии игры и проверьте, видны ли стены здания. Если вы выбрали деревню Дебря (Stonecutters' Settlement) под Новиградом как место для нового здания, это удобно, поскольку это первая область, в которой окажется игрок при запуске игры в режиме только с дополнением "Кровь и вино" (Blood and Wine)

**Как стена выглядит в REDkit:**

![alt text](image-4.png)

**Как стена выглядит в игре:**

![alt text](image-3.png)

### Исправление

Вот как избавиться от этой проблемы.

Для начала напомним, в чём суть: проблема возникает, когда вы выгружаете (check out) сущность, содержащую множество мешей, но файлы экземпляров материалов (.w2mi) не попадают в мод вместе с мешами (.w2mesh). Верно?

И именно поэтому **вам нужно выгрузить (checkout) экземпляры материалов, которые использует эта сущность, чтобы включить их в мод.**

Вот как это сделать:

1. Сначала найдите материалы, которые использует данная сущность.

2. Вы можете воспользоваться опцией **"Показать ресурсы" (Show resources)** в контекстном меню — щёлкните правой кнопкой мыши по сущности в панели сцены (Scene panel).


![alt text](image-2.png)

3. Здесь вы можете увидеть список всех мешей (*.w2mesh), на которые ссылается сущность.

4. Если вы кликнете на один из них, его точное расположение отобразится в Asset Browser. После открытия меша вы сможете увидеть, какие экземпляры материалов он использует.

5. Найдите недостающий экземпляр материала во вкладке **Materials**. Там вы можете дважды щёлкнуть по значению в колонке **Base** (например: **village_stone_wall (instance)**), чтобы отобразить его точное местоположение в Asset Browser — и затем выгрузить (check out) его.

![alt text](image-1.png)

6. ИЛИ вы можете добавить все файлы
<your_mod_project_dir>\workspace\environment\textures_tileable\common_materials\skellige\kaer_trolde_houses\***.w2mi**
в мод, выгрузив их (check out).

![alt text](image.png)

***
Источник: https://cdprojektred.atlassian.net/wiki/spaces/W3REDkit/pages/39256100/Level-only+assets+issue+and+fix

Автор: Johnny-Silverhand-Rocker

*Документация поддерживается участниками сообщества [REDkit RU](https://discord.gg/kRTEy8KcNa)*
***
